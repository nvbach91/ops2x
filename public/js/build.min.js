var App=App||{};!function(e){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),function(e){e.fn.scannerDetection=function(t){if("string"==typeof t)return this.each(function(){this.scannerDetectionTest(t)}),this;var i={onComplete:!1,onError:!1,onReceive:!1,timeBeforeScanTest:100,avgTimeByChar:30,minLength:6,endChar:[9,13],stopPropagation:!1,preventDefault:!1};return"function"==typeof t&&(t={onComplete:t}),t="object"!=typeof t?e.extend({},i):e.extend({},i,t),this.each(function(){var i=this,a=e(i),n=0,p=0,s="",r=!1,o=!1,l=function(){n=0,s=""};i.scannerDetectionTest=function(e){return e&&(n=p=0,s=e),s.length>=t.minLength&&p-n<s.length*t.avgTimeByChar?(t.onComplete&&t.onComplete.call(i,s),a.trigger("scannerDetectionComplete",{string:s}),l(),!0):(t.onError&&t.onError.call(i,s),a.trigger("scannerDetectionError",{string:s}),l(),!1)},a.data("scannerDetection",{options:t}).unbind(".scannerDetection").bind("keydown.scannerDetection",function(e){if(n&&-1!==t.endChar.indexOf(e.which)){var i=jQuery.Event("keypress",e);i.type="keypress.scannerDetection",a.triggerHandler(i),e.preventDefault(),e.stopImmediatePropagation()}}).bind("keypress.scannerDetection",function(e){t.stopPropagation&&e.stopImmediatePropagation(),t.preventDefault&&e.preventDefault(),n&&-1!==t.endChar.indexOf(e.which)?(e.preventDefault(),e.stopImmediatePropagation(),r=!0):(s+=String.fromCharCode(e.which),r=!1),n||(n=Date.now()),p=Date.now(),o&&clearTimeout(o),r?(i.scannerDetectionTest(),o=!1):o=setTimeout(i.scannerDetectionTest,t.timeBeforeScanTest),t.onReceive&&t.onReceive.call(i,e),a.trigger("scannerDetectionReceive",{evt:e})})}),this}}(jQuery),App.getWindowWidth=function(){return window.innerWidth},App.getAnimationTime=function(){return App.getWindowWidth()>799?100:0},Array.prototype.binaryIndexOf=function(e,t){"use strict";for(var i,a,n=0,p=this.length-1;p>=n;)if(i=(n+p)/2|0,a=this[i],a[e]<t)n=i+1;else{if(!(a[e]>t))return i;p=i-1}return-1},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},Number.prototype.formatMoney=function(e,t,i){var a=this,e=isNaN(e=Math.abs(e))?2:e,t=void 0===t?".":t,i=void 0===i?"":i,n=0>a?"-":"",p=parseInt(a=Math.abs(+a||0).toFixed(e))+"",s=(s=p.length)>3?s%3:0;return n+(s?p.substr(0,s)+i:"")+p.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+i)+(e?t+Math.abs(a-p).toFixed(e).slice(2):"")},App.correctTime=function(e){return 10>e?"0"+e:e},App.createDateObject=function(e,t){t=t?t:"short";var i=null;return i=e?new Date(e):new Date,{day:App.week[i.getDay()][t],date:App.correctTime(i.getDate()),month:App.correctTime(i.getMonth()+1),year:App.correctTime(i.getFullYear()),hh:App.correctTime(i.getHours()),mm:App.correctTime(i.getMinutes()),ss:App.correctTime(i.getSeconds())}},App.getDay=function(e){var t=App.createDateObject(e,"long");return t.day+" "+t.date+"/"+t.month+"/"+t.year},App.getDate=function(e){var t=App.createDateObject(e);return t.day+" "+t.date+"/"+t.month+"/"+t.year+" "+t.hh+":"+t.mm+":"+t.ss},App.getDatePrefix=function(e){var t=App.createDateObject(e);return t.year+""+t.month+t.date},App.startReceiptTime=function(){clearInterval(App._receiptTimeInterval),App._receiptTimeInterval=setInterval(function(){App.receiptTime.text(App.getDate())},500)},App.sortByEAN=function(e,t){return e.ean<t.ean?-1:1},App.beep=function(){App.isMuted||(App.beeper.pause(),App.beeper.currentTime=0,App.beeper.play())},App.correctPrice=function(e){var t=e,i=t.indexOf(".");if(i>0){var a=t.slice(0,i),n=t.slice(i+1,t.length);return n.length>2?n=n.slice(0,2):n.length>1||(n+=n.length>0?"0":"00"),a+"."+n}t=e.replace(/\./g,"");for(var p="";t.length>2&&"0"===t.charAt(0);)t=t.slice(1);return 0===parseInt(t)?"0.00":(t.length>2?p=t.slice(0,t.length-2)+"."+t.slice(t.length-2,t.length):t.length>1?p="0."+t:t.length>0&&(p="0.0"+t),p)},App.recalculateTotalCost=function(){1===App.jSaleList.children().size()&&App.jSiPlaceholder.removeClass("hidden");var e=0,t=0;App.jSaleList.find(".sale-item").each(function(){var e=$(this),i=parseInt(e.find(".si-quantity").val());t+=i;var a=parseFloat(e.find(".si-price").text()),n=a*i,p=e.find(".d-discount").val()/100;n-=n*p,n.toFixed(2),e.find(".si-total").text(n.formatMoney())}),App.jSaleList.find(".sale-item .si-total").each(function(){e+=parseFloat($(this).text())}),e.toFixed(2);var i=e.formatMoney();App.jCheckoutTotal.text(App.lang.reg_total+": "+i+" "+App.settings.currency.symbol),App.jPayAmount.text(i),App.jCheckoutLabel.text(App.lang.reg_checkout+" ("+t+" "+("en"===App.locale?1!==t?App.lang.reg_items+"s":App.lang.reg_items+"":1===t?App.lang.reg_item:t>=2&&4>=t?App.lang.reg_item_plural:App.lang.reg_items)+")")},App.correctPriceInput=function(){var e=App.jPriceInput.val();if(!/^\-?\d+\*?(\d+)?\.?(\d+)?$/g.test(e)||"-"===e)return App.jPriceInput.val(""),!1;var t=e.indexOf("*");if(e.indexOf("*")>=0){var i=App.getMultiplicationNumber(),a=t>=0?e.slice(t+1,e.length):e;return a.length&&/^0+$/.test(a)&&(a=""),App.jPriceInput.val(i+"*"+App.correctPrice(a)),!0}var n="";"-"===e.charAt(0)&&(e=e.slice(1),n="-");var p=App.correctPrice(e);return p?void App.jPriceInput.val(n+p):(App.jPriceInput.val(""),!1)},App.checkPriceInput=function(e){return e.stopPropagation(),App.jKc.text("keyCode: "+e.keyCode),27===e.keyCode?(App.jPriceInput.blur(),!0):13===e.keyCode?(App.jPriceInput.val().length&&App.jPriceInput.blur(),!0):8===e.keyCode||9===e.keyCode?!0:109===e.keyCode||189===e.keyCode||173===e.keyCode?App.jPriceInput.val().length>0?!1:!0:229===e.keyCode?!1:106===e.keyCode?0===App.jPriceInput.val().length||App.jPriceInput.val().length>3?!1:App.jPriceInput.val().indexOf("*")<0?!0:!1:110===e.keyCode?0===App.jPriceInput.val().length?!1:App.jPriceInput.val().indexOf(".")<0?!0:!1:void((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault())},App.checkNumericInput=function(e,t){return 13===e.keyCode?(t.blur(),!0):8===e.keyCode?!0:void((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault())},App.setUpMobileNumericInput=function(e){$.browser.mobile},App.closeCurtain=function(){App.curtain&&(App.jMain?App.jMain.removeClass("blur"):null,App.curtain.remove(),App.curtain=null)},App.showInCurtain=function(e){App.curtain||(App.jMain?App.jMain.addClass("blur"):null,App.curtain=$("<div>").attr("id","curtain").click(function(){App.closeCurtain()}).append(e).appendTo(App.jAppContainer))},App.getMultiplicationNumber=function(){var e=App.jPriceInput.val().replace(/[\s\.]+/g,"");return e.match(/^\-?[1-9](\d+)?\*(\d+)?$/g)?parseInt(e.slice(0,e.indexOf("*"))):1},App.addItemToCheckout=function(e,t,i,a,n,p,s,r,o){App.jPayAmount.removeClass("checked");var l=App.jSaleList.find(".sale-item.last");if(e.toString()===l.find(".si-id").text()&&App.isInRegistrySession)return App.incrementLastItem(l),!0;App.jSiPlaceholder.size()&&App.jSiPlaceholder.addClass("hidden"),App.jSaleList.children().size()>0&&App.jSaleList.children().eq(App.jSaleList.children().size()-1).removeClass("last");var d=$("<li>").addClass("sale-item last"),c=$("<div>").addClass("sale-item-main");$("<div>").addClass("si-id").text(e).appendTo(c),$("<div>").addClass("si-ean").text(t).appendTo(c),$("<input>").addClass("si-name").click(function(){$(this).select()}).val(i).appendTo(c),$("<input>").addClass("si-quantity").attr({maxlength:3}).val(o?o:1).keydown(function(e){return e.stopPropagation(),App.checkNumericInput(e,this)}).focus(function(){$(this).select()}).blur(function(){$(this).val()||$(this).val(0),App.recalculateTotalCost()}).appendTo(c),$("<div>").addClass("si-tax").text(p).appendTo(c),$("<div>").addClass("si-price").text(a).appendTo(c),$("<div>").addClass("si-total").text(a).appendTo(c),$("<button>").addClass("si-remove").click(function(){d.slideUp(App.getAnimationTime(),function(){$(this).remove(),App.recalculateTotalCost(),App.jPriceInput.blur()})}).appendTo(c),c.children(".si-price, .si-total").click(function(){d.find(".sale-item-extend").slideToggle(App.getAnimationTime(),function(){var e=$(this);e.is(":hidden")?e.parent().removeClass("expanded"):e.parent().addClass("expanded")})}),c.appendTo(d);var u=$("<div>").addClass("sale-item-extend"),v=$("<div>").addClass("change-price");$("<div>").addClass("d-label").text(App.lang.reg_individual_price).appendTo(v),$("<input>").addClass("d-price").attr({maxlength:7,placeholder:"e.g. 4200 = 42.00"}).val(a).keydown(function(e){return e.stopPropagation(),App.checkNumericInput(e,this)}).blur(function(){var e=$(this),t=e.val(),i=App.correctPrice(t);i&&/^\-?\d+\.\d{2}$/g.test(i)?(e.removeClass("invalid"),e.val(i),e.parents().eq(2).find(".si-price").text(i),App.recalculateTotalCost()):e.addClass("invalid")}).focus(function(){$(this).select()}).appendTo(v);var g=$("<div>").addClass("change-discount");$("<div>").addClass("d-label").text(App.lang.reg_individual_discount+" (%)").appendTo(g),$("<input>").addClass("d-discount").attr({maxlength:2,placeholder:"0 - 100",disabled:!0}).val(0).keydown(function(e){return e.stopPropagation(),App.checkNumericInput(e,this)}).blur(function(){var e=$(this);/^\d{1,2}$|^100$/g.test(e.val())?App.recalculateTotalCost():e.val(0)}).focus(function(){$(this).select()}).appendTo(g);var m=$("<div>").addClass("open-detail");$("<div>").addClass("d-label").text(App.lang.reg_details).appendTo(m),$("<button>").addClass("d-detail").click(function(){var e=$("<div>").attr("id","details-box").click(function(e){e.stopPropagation()});$("<div>").addClass("db-header").append($("<div>").addClass("db-title").text(App.lang.details_title)).append($("<button>").addClass("db-close").click(function(){App.closeCurtain()})).appendTo(e);var t=$("<div>").addClass("db-body"),o=$("<div>").addClass("db-info");$("<div>").addClass("db-name").text(App.lang.details_name+i).appendTo(o),$("<div>").addClass("db-price").text(App.lang.details_price+a+" "+App.settings.currency.symbol).appendTo(o),$("<div>").addClass("db-group").text(App.lang.details_group+n).appendTo(o),$("<div>").addClass("db-tax").text(App.lang.details_tax+p+"%").appendTo(o),$("<div>").addClass("db-tags").text(App.lang.details_tags+s).appendTo(o),$("<div>").addClass("db-desc").text(App.lang.details_description+r).appendTo(o),o.appendTo(t),t.appendTo(e),App.showInCurtain(e)}).appendTo(m),v.appendTo(u),g.appendTo(u),m.appendTo(u),u.hide(),u.appendTo(d),d.appendTo(App.jSaleList),App.jSaleList.animate({scrollTop:App.jSaleList[0].scrollHeight},App.getAnimationTime()),App.recalculateTotalCost(),App.beep()},App.incrementLastItem=function(e){var t=e.find(".si-quantity");t.val(parseInt(t.val())+1),App.recalculateTotalCost(),App.beep()},App.bindSaleGroups=function(e){e.find("button").click(function(){var e=$(this),t=App.jSaleList.find(".sale-item.last");if(t.size()&&e.attr("sg-id")!==t.find(".si-id").text()&&App.isInRegistrySession)return App.jPriceInput.val(""),App.showWarning(App.lang.misc_enter_price),!1;var i=App.jPriceInput.val();i=i.replace(/[\s]+/g,"");var a=i.indexOf("*"),n=a>=0?i.slice(a+1,i.length):i;if(0===n.length||0===parseInt(n)||"-"===i)return App.jPriceInput.val(""),App.showWarning("You must enter a price"),!1;var p=App.getMultiplicationNumber(),s="";"-"===n.charAt(0)&&(n=n.slice(1),s="-");var r=App.correctPrice(n);if(!r)return App.jPriceInput.val(""),!1;n=App.correctPrice(n),App.jPriceInput.val(s+n);var o=e.attr("sg-id"),l=e.text(),d=e.attr("sg-group"),c=e.attr("sg-tax"),u=e.attr("sg-group"),v=e.text();App.addItemToCheckout(o,"",l,n,d,c,u,v,p),App.isInRegistrySession=!0,App.justUsedScanner=!1})},App.bindQuickSales=function(e){e.find(".qs-item").click(function(){var e=$(this),t=e.find(".qs-price").text().replace(/[^\-\d\.]/g,""),i=App.getMultiplicationNumber();App.jPriceInput.val(t);var a=e.find("button").text(),n=e.find(".qs-id").text(),p=e.find(".qs-tax").text(),s=e.find(".qs-group").text(),r=e.find(".qs-tags").text(),o=e.find(".qs-desc").text();App.addItemToCheckout(n,"",a,t,s,p,r,o,i),App.isInRegistrySession=!0,App.justUsedScanner=!1})},App.showWarning=function(e){var t='<div id="warning-box">                    <div class="wb-header">                        <div class="wb-title"></div>                        <button class="wb-close"></button>                    </div>                    <div class="wb-body">'+e+"</div>                </div>";App.showInCurtain(t),App.curtain.find("#warning-box").click(function(e){e.stopPropagation()}),App.curtain.find("button.wb-close").click(function(){App.closeCurtain()})},App.discardSale=function(e){e?(App.jSaleList.find(".sale-item").remove(),App.recalculateTotalCost()):App.jSaleList.find(".sale-item").slideUp(App.getAnimationTime(),function(){$(this).remove(),App.recalculateTotalCost()})},App.createWebRegisterDOM=function(){var e='<nav>                <div id="logo"><div class="logo"></div></div>                <div id="brand">EnterpriseApps</div>                <div id="menu-top">                    <div id="cp-link" title="'+App.lang.reg_open_cp+'"></div>                    <div id="muter" title="'+App.lang.reg_mute+'"></div>                    <div id="profile">'+(App.currentEmployee.name||"LOGIN")+'</div>                    <div id="logout" title="'+App.lang.reg_logout+'"></div>                </div>             </nav>             <div id="control-panel">                <div id="cp-header">                   <div class="logo"></div>                   <div class="label">'+App.lang.reg_cp+'</div>                   <div class="close"></div>                </div>                <div id="cp-body"></div>             </div>             <div id="main">                <div id="col-1">                    <div id="live-search">                        <input id="search" maxlength="13" placeholder="PLU" autocomplete="off">                        <ul id="dropdown"></ul>                    </div>                    <input id="price-input" placeholder="0.00" maxlength="9">                    <div id="reg-buttons">                        <div id="sale-groups"></div>                        <div id="tabs"></div>                    </div>                    <div id="tab-navs"></div>                </div>                <div id="col-2">                   <div id="checkout-header">                       <div id="checkout-label">'+App.lang.reg_checkout+" (0 "+App.lang.reg_items+')</div>                       <div id="checkout-total">'+App.lang.reg_total+": 0 "+App.settings.currency.symbol+'</div>                   </div>                   <div id="checkout-btns">                       <button id="park-sale">'+App.lang.reg_park+'</button>                       <button id="discard-sale">'+App.lang.reg_discard+'</button>                   </div>                   <ul id="sale-list">                       <li id="si-placeholder">                           <div>'+App.lang.reg_si_placeholder+'</div>                       </li>                   </ul>                   <div id="keyboard" class="keyboard" style="display: none;">                        <button id="btnp">PLU</button>                        <button id="btn7">7</button>                        <button id="btn8">8</button>                        <button id="btn9">9</button>                        <button id="btnm"></button>                        <button id="btn4">4</button>                        <button id="btn5">5</button>                        <button id="btn6">6</button>                        <button id="btnn">-</button>                        <button id="btn1">1</button>                        <button id="btn2">2</button>                        <button id="btn3">3</button>                        <button id="btnc">C</button>                        <button id="btndot">.</button>                        <button id="btn0">0</button>                        <button id="btnb"></button>                   </div>                   <div id="paycalc">                       <button id="kb-toggle" class="open"></button>                       <div id="pay">                           <div id="pay-label">'+App.lang.reg_pay+'</div>                           <div id="pay-amount">0</div>                           <div id="pay-currency">'+App.settings.currency.symbol+'</div>                       </div>                    </div>                </div>             </div>             <div id="kc"></div>';App.jAppContainer.html(e)},App.simulateEnterKeyup=function(){var e=$.Event("keyup");return e.keyCode=13,e},App.bindKeyboard=function(){App.keyboard=$("#keyboard");var e=App.keyboard.find("#btnp"),t=App.keyboard.find("#btnm");App.keyboard.find("button").click(function(){App.isInRegistrySession&&(App.isInRegistrySession=!1,App.jPriceInput.val(""));var i=$(this),a=i.attr("id"),n=e.hasClass("activePLU"),p=n?App.jSearchBox:App.jPriceInput,s=n?13:9,r=p.val();switch(a){case"btnp":n?(e.removeClass("activePLU"),App.jLiveSearch.removeClass("activePLU"),App.jPriceInput.show(),t.text("").removeClass("activePLU"),p.val(""),p=App.jPriceInput):(e.addClass("activePLU"),App.jLiveSearch.addClass("activePLU"),App.jPriceInput.hide(),t.text("OK").addClass("activePLU"),p.val(""),p=App.jSearchBox,p.focus());break;case"btnm":n?App.jSearchBox.trigger(App.simulateEnterKeyup()):r.length>0&&r.length<=3&&r.indexOf("*")<0&&"-"!==r&&p.val(r+"*");break;case"btnn":n||0===r.length&&p.val("-");break;case"btnc":p.val("");break;case"btnb":r.length>0&&p.val(r.slice(0,-1));break;case"btndot":r.length>0&&r.indexOf(".")<0&&p.val(r+".");break;default:(r+i.text()).length<=s&&p.val(r+i.text())}App.beep()})},App.saveLocale=function(e){localStorage.locale=e,App.locale=e},App.loadLocalStorage=function(){localStorage.hasOwnProperty("isMuted")?App.isMuted="true"===localStorage.isMuted:(localStorage.isMuted=!1,App.isMuted=!1),localStorage.hasOwnProperty("locale")?App.locale=localStorage.locale:App.saveLocale("en"),localStorage.hasOwnProperty("offlineSales")||(localStorage.offlineSales="[]")},App.loadLocale=function(){switch(App.locale){case"cs":App.lang=App.GLocalCS,App.week=[{"short":"Ne","long":"Neděle"},{"short":"Po","long":"Pondělí"},{"short":"Út","long":"Úterý"},{"short":"St","long":"Středa"},{"short":"Čt","long":"Čtvrtek"},{"short":"Pá","long":"Pátek"},{"short":"So","long":"Sobota"}];break;default:App.lang=App.GLocalEN,App.week=[{"short":"Sun","long":"Sunday"},{"short":"Mon","long":"Monday"},{"short":"Tue","long":"Tuesday"},{"short":"Wed","long":"Wednesday"},{"short":"Thu","long":"Thursday"},{"short":"Fri","long":"Friday"},{"short":"Sat","long":"Saturday"}]}},App.init=function(){App.loadLocalStorage(),App.loadLocale(),App.jAppContainer=$("#app"),App.loadingScreen=$('<div class="loading"></div>'),App.curtain=null,App.justUsedScanner=!1,App._timeBetweenConsecutiveScannings=2e3,$(document).keydown(function(e){return 27===e.keyCode?App.closeCurtain():13===e.keyCode&&App.jControlPanel&&!App.jControlPanel.hasClass("visible")&&(App.curtain||!App.jPriceInput||App.justUsedScanner?App.jCashInput&&App.jCashInput.focus():App.jPriceInput.focus()),!0})},App.renderSaleGroupsButtons=function(){for(var e=App.buttons.saleGroups,t="",i=e.length,a=0;i>a;a++)t+=$("<button>",{"class":"sg","sg-id":"sg"+a,"sg-tax":e[a].tax,"sg-group":e[a].group,text:e[a].group.toUpperCase(),style:"background-color: #"+e[a].bg}).prop("outerHTML");App.sg.html(t),App.bindSaleGroups(App.sg)},App.renderQuickSales=function(){for(var e=App.catalog.articles,t=$("#tabs").empty(),i=$("#tab-navs").empty(),a=App.buttons.tabs,n="",p=[],s=0;s<a.length;s++){var r=a[s].quickSales;n+='<div class="quick-sales'+(0===s?" activeTab":"")+'">';for(var o=0;o<r.length;o++){var l=r[o],d=e[e.binaryIndexOf("ean",l.ean)];d&&(n+='<div class="qs-item">                        <button style="background-color:#'+l.bg+'">'+d.name+'</button>                        <div class="qs-id">qs-t'+(s+1)+"-"+o+'</div>                        <div class="qs-price">'+d.price+" "+App.settings.currency.symbol+'</div>                        <div class="qs-group">'+d.group+'</div>                        <div class="qs-tax">'+d.tax+"</div>                    </div>")}n+="</div>",p+='<div class="tab-nav'+(0===s?" activeTab":"")+'">'+a[s].name+"</div>"}t.append(n),App.bindQuickSales(t),i.append(p);var c=t.find(".quick-sales"),u=i.find(".tab-nav");u.each(function(e){var t=$(this);t.click(function(){u.each(function(){$(this).removeClass("activeTab")}),t.addClass("activeTab"),c.each(function(){$(this).removeClass("activeTab")}),c.eq(e).addClass("activeTab")})})},App.generateEmailReceipt=function(e){var t=$("<div>").addClass("email-receipt"),i=$("<input>").attr("id","email-input").focus(function(){i.removeClass("invalid"),"@"!==i.val()&&(i.val("@"),i.select())}).val("@").appendTo(t),a=$("<button>").attr("id","email-send").text(App.lang.pay_email_receipt).click(function(){var t=i.val();App.isValidEmail(t)?(i.prop("disabled",!0),a.prop("disabled",!0),e.recipient=t,e.shop=App.settings.name+"\n"+App.settings.address.street+"\n"+App.settings.address.city+" "+App.settings.address.zip+" "+App.settings.address.country+"\nTIN: "+App.settings.tin+"\nVAT: "+App.settings.vat+"\nPhone: "+App.settings.phone,a.html('<div class="mi-loader loading"></div>'),$.ajax({type:"POST",url:"/mod/mailreceipt",dataType:"json",data:e}).done(function(e){e.success?(a.html("Email sent"),a.addClass("sent")):(a.html("Email could not be sent. Try again"),a.prop("disabled",!1),i.prop("disabled",!1),console.log(e))}).fail(function(e){a.html("Email could not be sent. Try again"),a.prop("disabled",!1),i.prop("disabled",!1),console.log(e)})):i.addClass("invalid").val("Invalid email")}).appendTo(t);return t},App.saveLocalSale=function(e){var t=JSON.parse(localStorage.offlineSales);t.push(e),localStorage.offlineSales=JSON.stringify(t)},App.renderWebRegister=function(){App.closeCurtain(),App.createWebRegisterDOM(),App.bindKeyboard(),App.jMain=$("#main"),App.jSiPlaceholder=$("#si-placeholder"),App.beeper=new Audio("../sound/beep2.mp3"),App.jKc=$("#kc"),App.jSaleList=$("#sale-list"),App.jPriceInput=$("#price-input"),App.jPayAmount=$("#pay-amount"),App.jCheckoutTotal=$("#checkout-total"),App.jCheckoutLabel=$("#checkout-label"),App.jLiveSearch=$("#live-search"),App.jControlPanel=$("#control-panel"),App.cpBody=App.jControlPanel.find("#cp-body"),App.createControlPanel(),App.setUpMobileNumericInput(App.jPriceInput),App.isInRegistrySession=!0;var e=$("#muter");App.isMuted?e.addClass("muted"):e.addClass("unmuted"),e.click(function(){App.isMuted?(e.removeClass("muted"),e.addClass("unmuted"),localStorage.isMuted=!1,App.isMuted=!1):(e.removeClass("unmuted"),e.addClass("muted"),localStorage.isMuted=!0,App.isMuted=!0)});var t=$("#discard-sale");t.click(function(){App.discardSale(!1)}),App.jPriceInput.keydown(function(e){return App.checkPriceInput(e)}).blur(function(){return App.correctPriceInput()}).click(function(){App.jPriceInput.val(""),App.isInRegistrySession=!1}).focus(function(){App.jPriceInput.val(""),App.isInRegistrySession=!1}),App.sg=$("#sale-groups"),App.renderSaleGroupsButtons(),App.renderQuickSales(),$("#logo > .logo, #cp-link").click(function(){App.jControlPanel.addClass("visible")}),$("#cp-header > .close, #cp-header > .logo, #main").click(function(){App.jControlPanel.removeClass("visible")}),$("#kb-toggle").click(function(){var e=$(this);e.hasClass("close")?(e.removeClass("close"),e.addClass("open")):(e.removeClass("open"),e.addClass("close")),App.keyboard.slideToggle(App.getAnimationTime(),function(){App.keyboard.is(":visible")&&App.keyboard.css("display","flex"),App.jSaleList.animate({scrollTop:App.jSaleList[0].scrollHeight},App.getAnimationTime())})});var i=null;$("#pay").click(function(){if(App.jSaleList.find(".sale-item").size()<1)return!1;App.jPriceInput.val("");var e=$("<div>").attr("id","payment-box").click(function(e){e.stopPropagation()});$("<div>").addClass("pb-header").append($("<div>").addClass("pb-title").text(App.lang.pay_payment)).append($("<button>").addClass("pb-close").click(function(){App.closeCurtain()})).appendTo(e);var t=$("<div>").addClass("pb-body");i={number:App.getDatePrefix()+App.sales.receipts.length,date:null,clerk:App.currentEmployee.name,items:[],confirmed:!1},App.jSaleList.find(".sale-item").each(function(){var e=$(this),t=e.find(".si-quantity").val(),a=e.find(".si-price").text(),n=e.find(".si-name").val(),p=e.find(".si-tax").text();i.items.push({name:n,price:a,quantity:parseInt(t),tax_rate:parseInt(p)})});var a=App.jPayAmount.text().replace(/,/g,".").replace(/[^\d\.\-]/g,""),n=Math.round(parseFloat(a)).formatMoney(),p=App.renderReceipt(i);App.startReceiptTime();var s=$("<div>").attr("id","payment");App.jCashInput=$("<input>");var r=$("<div>").addClass("cash-quick-label").text(App.lang.pay_quick_cash);r.appendTo(s);for(var o=$("<div>").addClass("cash-quick"),l=[50,100,200,500,1e3,2e3],d=0;d<l.length;d++)$("<button>").addClass("cash-button").text(l[d]).click(function(){var e=$(this),t=e.text();App.jCashInput.val(t+"00").blur()}).appendTo(o);o.appendTo(s);var c=$("<div>").attr("id","cash-change");App.changeAmount=0,$("<div>").addClass("cash-pay-label").text(App.lang.pay_tendered).appendTo(s);var u=$("<div>").addClass("cash-input-row");$("<div>").attr("id","pk-toggle").addClass("open").click(function(){var e=$(this);e.hasClass("close")?(e.removeClass("close"),e.addClass("open")):(App.jCashInput.val("").blur(),e.removeClass("open"),e.addClass("close")),v.slideToggle(App.getAnimationTime()),o.slideToggle(App.getAnimationTime()),r.slideToggle(App.getAnimationTime())}).appendTo(u),$("<div>").attr("id","cash-input-clear").click(function(){App.jCashInput.val(""),App.jCashInput.blur()}).appendTo(u),App.jCashInput.attr("id","cash-input").attr("placeholder","0.00").attr("maxlength","9").val(n).keydown(function(e){return e.stopPropagation(),27===e.keyCode?(App.jCashInput.blur(),!0):App.checkNumericInput(e,this)}).blur(function(){var t=$(this),i=t.val(),a=App.correctPrice(i);return t.val(a),!a||!/^\-?\d+\.\d{2}$/g.test(a)||parseFloat(a)<parseFloat(n)?(t.addClass("invalid"),s.find("#cash-confirm").addClass("disabled"),!0):(t.removeClass("invalid"),s.find("#cash-confirm").removeClass("disabled"),App.changeAmount=(parseFloat(t.val())-parseFloat(n)).formatMoney(),c.text(App.lang.pay_change+App.changeAmount+" "+App.settings.currency.symbol),e.find("#rs-tender .rs-value").text(t.val()),void e.find("#rs-change .rs-value").text(App.changeAmount))}).focus(function(){$(this).select()}).appendTo(u),u.appendTo(s);var v=$('<div id="pkeyboard" class="keyboard" style="display: none;">                        <button id="pbtn7">7</button>                        <button id="pbtn8">8</button>                        <button id="pbtn9">9</button>                        <button id="pbtn4">4</button>                        <button id="pbtn5">5</button>                        <button id="pbtn6">6</button>                        <button id="pbtn1">1</button>                        <button id="pbtn2">2</button>                        <button id="pbtn3">3</button>                        <button id="pbtndot">.</button>                        <button id="pbtn0">0</button>                        <button id="pbtnb"></button>                        <button id="pbtnok">OK</button>                   </div>');v.find("button").click(function(){var e=$(this),t=e.attr("id"),i=App.jCashInput.val(),a=i.indexOf(".");switch(t){case"pbtndot":i.length>0&&0>a&&App.jCashInput.val(i+".");break;case"pbtnok":App.jCashInput.blur();break;case"pbtnb":App.jCashInput.val(i.slice(0,i.length-1));break;default:a>0?i.length-a<3&&App.jCashInput.val(i+e.text()):App.jCashInput.val(i+e.text())}}),v.appendTo(s),App.setUpMobileNumericInput(App.jCashInput),c.text(App.lang.pay_change+Number(0).formatMoney()+" "+App.settings.currency.symbol).appendTo(s);var g=!1;$("<button>").attr("id","cash-confirm").text(App.lang.pay_confirm).click(function(){var e=$(this);e.off(),e.hasClass("disabled")||(clearInterval(App._receiptTimeInterval),i.date=new Date,i.items=JSON.stringify(i.items),i.tendered=App.jCashInput.val(),$.ajax({type:"POST",url:"/mod/addsale",dataType:"json",data:i}).done(function(e){if(e.success){t.addClass("done"),App.sales.receipts.push(e.msg),s.children().remove(),App.discardSale(!0),$("<div>").addClass("pc-label").text(App.lang.pay_complete).appendTo(s),"0.00"!==App.changeAmount&&$("<div>").addClass("pc-change").text(App.lang.pay_issue_change+App.changeAmount+" "+App.settings.currency.symbol).appendTo(s),$("<button>").attr("id","print-receipt").text(App.lang.pay_print_receipt).click(function(){window.print(),g=!0}).appendTo(s);var a=App.generateEmailReceipt(i);a.appendTo(s),$("<button>").attr("id","done-payment").text(App.lang.pay_done).click(function(){g||window.print(),App.closeCurtain(),App.jPriceInput.focus()}).appendTo(s)}else App.closeCurtain(),App.showWarning("Server refused to sync"),console.log(e)}).fail(function(e){t.addClass("failed"),s.children().remove(),App.discardSale(!0),$("<div>").addClass("pc-label").html(App.lang.pay_sync_failed).appendTo(s),"0.00"!==App.changeAmount&&$("<div>").addClass("pc-change").text(App.lang.pay_issue_change+App.changeAmount+" "+App.settings.currency.symbol).appendTo(s),$("<button>").attr("id","print-receipt").text(App.lang.pay_print_receipt_without).click(function(){window.print(),g=!0}).appendTo(s),$("<button>").attr("id","done-payment").text(App.lang.pay_done).click(function(){g||window.print(),App.closeCurtain(),App.jPriceInput.focus()}).appendTo(s),App.saveLocalSale(i)}))}).appendTo(s),s.appendTo(t),$("<div>").addClass("receipt-container").append(p).appendTo(t),t.appendTo(e),App.showInCurtain(e),App.jCashInput.focus(),App.beep()});var a=App.catalog.articles;App.nArticles=a.length;for(var n=0;n<App.nArticles;n++)a[n].id=n;a.sort(App.sortByEAN),App.jSearchBox=App.jLiveSearch.find("#search"),App.jSearchBox.keyup(function(e){var t=$(this);if(13===e.keyCode){var i=t.val(),n=a.binaryIndexOf("ean",i);if(n>=0){var p=a[n],s=App.getMultiplicationNumber();App.addItemToCheckout(p.id,p.ean,p.name,p.price,p.group,p.tax,p.tags,p.desc,s),t.removeClass("not-found"),t.attr("placeholder","PLU"),App.isInRegistrySession=!1,App.jPriceInput.blur(),App.jPriceInput.val(p.price)}else t.attr("placeholder","PLU not found");t.val("")}else 27===e.keyCode&&t.blur()}).keydown(function(e){
e.stopPropagation()}).click(function(){$(this).removeClass("not-found"),$(this).attr("placeholder","PLU")}).focus(function(){$(this).removeClass("not-found"),$(this).attr("placeholder","PLU")}),$(document).scannerDetection(function(e){clearTimeout(App._scannerTimingOut),App.jSearchBox.blur(),App.justUsedScanner=!0,App._scannerTimingOut=setTimeout(function(){App.justUsedScanner=!1},App._timeBetweenConsecutiveScannings),App.closeCurtain(),App.jSearchBox.val(e),App.jSearchBox.trigger(App.simulateEnterKeyup()),App.isInRegistrySession=!0}),$("#logout").click(function(){App.renderDashBoard()})},App.createCenterBox=function(e,t){return'<div class="center-box'+(e?" scrollable":"")+'">'+t+"</div>"},App.renderDashBoard=function(){App.closeCurtain();var e='<nav>                <div id="logo"><div class="logo"></div></div>                <div id="brand">EnterpriseApps</div>                <div id="menu-top">                    <div id="profile">'+App.settings.name+'</div>                    <div id="sign-out">'+App.lang.dashboard_sign_out+"</div>                </div>             </nav>"+App.createCenterBox(!1,'<div class="form-header">'+App.lang.dashboard_header+'</div>                <form id="employee-login" action="">                    <div class="form-label">'+App.lang.dashboard_label+'</div>                    <input id="employee-username" type="text" placeholder="'+App.lang.dashboard_username+'">                    <input id="employee-pin" type="password" placeholder="PIN">                    <input type="submit" value="OK">                </form>');App.jAppContainer.html(e);var t=$("#employee-login"),i=t.find("#employee-username");t.submit(function(e){e.preventDefault();for(var i=t.find("#employee-username"),a=t.find("#employee-pin"),n=!1,p=App.staff.length,s=0;p>s;s++){var r=App.staff[s];if(r.name===i.val()&&r.pin===a.val()){App.currentEmployee=r,n=!0;break}}n?App.renderWebRegister():App.showWarning("Invalid Employee Name or PIN")}),$("#sign-out").click(function(){App.showLoading(),$.ajax({type:"GET",url:"/signout"}).done(function(){App.renderSignin()}).fail(function(){App.closeCurtain(),App.showWarning("Unable to sign out. Please check your connection")})}),i.focus()},App.initDashBoard=function(){$.when($.getJSON("/api/catalog",function(e){App.catalog=e}),$.getJSON("/api/settings",function(e){App.settings=e,App.staff=e.staff,App.receipt=e.receipt}),$.getJSON("/api/buttons",function(e){App.buttons=e}),$.getJSON("/api/sales",function(e){App.sales=e})).then(function(){App.renderDashBoard()})},App.showLoading=function(){App.showInCurtain(App.loadingScreen)},App.emailRegex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,App.isValidEmail=function(e){return["guest"].indexOf(e)>=0?!0:App.emailRegex.test(e)},App.renderSignin=function(){App.closeCurtain();var e=App.createCenterBox(!1,'<div class="form-header">'+App.lang.sign_in_header+'</div>                <form id="sign-in" action="" method="POST">                    <div class="form-row">                        <div class="form-label">'+App.lang.sign_in_label+'</div>                        <div id="lang-switch">                            <div class="lang en'+("en"===App.locale?" active":"")+'" title="Use English"></div>                            <div class="lang cs'+("cs"===App.locale?" active":"")+'" title="Use Czech"></div>                        </div>                    </div>                    <input id="username" type="text" placeholder="'+App.lang.sign_in_username+'">                    <input id="password" type="password" placeholder="'+App.lang.sign_in_password+'">                    <input type="submit" value="'+App.lang.sign_in_sign_in+'">                    <div id="form-help">                        <div id="signup">'+App.lang.sign_in_sign_up+'</div>                        <div id="forgot">'+App.lang.sign_in_forgot+'</div>                    </div>                </form>                <div class="form-footer">Powered by EnterpriseApps</div>');App.jAppContainer.html(e),$("#lang-switch").find(".lang").click(function(){var e=$(this);if(e.hasClass("en")?App.saveLocale("en"):e.hasClass("cs")&&App.saveLocale("cs"),!e.hasClass("active")){var t=$("#username").val(),i=$("#password").val();e.addClass("active"),e.siblings().removeClass("active"),App.loadLocale(),App.renderSignin(),$("#username").val(t),$("#password").val(i)}});var t=$("#sign-in");t.find("#forgot").click(function(){App.renderForgot()}),t.find("#signup").click(function(){App.renderSignup()}),t.submit(function(e){e.preventDefault();var t=$(this),i=t.find("#username").val().toLowerCase(),a=t.find("#password").val();App.isValidEmail(i)&&a.length?(App.showLoading(),$.ajax({type:"POST",url:"/auth",dataType:"json",data:{username:i||" ",password:a||" "}}).done(function(e){e.isAuthenticated?App.initDashBoard():alert("Wrong credentials")}).fail(function(e){App.closeCurtain();var t="Incorrect username and/or password";0===e.status&&(t="Network error. Please check your internet connection"),App.showWarning(t)})):App.showWarning("Please enter your email and password to sign in"),t.find("#password").val("")}),$("#username").focus()},App.renderSignup=function(){var e=App.createCenterBox(!0,'<div class="form-header">'+App.lang.sign_up_header+'</div>                <form id="sign-up" action="" method="POST">                    <div class="form-label">'+App.lang.sign_up_label+'</div>                    <input id="username" type="text" placeholder="'+App.lang.sign_up_email+'" required>                    <input id="password" type="password" placeholder="'+App.lang.sign_up_password+'" pattern=".{8,128}" title="Password must be at least 8 characters long" required>                    <input id="confirm" type="password" placeholder="'+App.lang.sign_up_confirm_password+'" pattern=".{8,128}" title="Password must be at least 8 characters long" required>                    <input id="name" type="text" placeholder="'+App.lang.sign_up_name+'" pattern=".{3,100}" title="Your Best World Shop, Inc." required>                    <input id="tin" type="text" placeholder="'+App.lang.sign_up_tin+'" pattern="\\d{8}" title="Invalid TIN. Example: 12345678" required>                    <input id="vat" type="text" placeholder="'+App.lang.sign_up_vat+'" pattern="[A-Z]{2}\\d{8,10}" title="Invalid VAT. Example: CZ1234567890" required>                    <input id="street" type="text" placeholder="'+App.lang.sign_up_street+'" pattern=".{5,100}" title="Example: Spálená 78/12" required>                    <input id="city" type="text" placeholder="'+App.lang.sign_up_city+'" pattern=".{2,75}" title="Example: Prague" required>                    <input id="zip" type="text" placeholder="'+App.lang.sign_up_zip+'" pattern="\\w{3,10}" title="Example: 18000" required>                    <input id="country" type="text" placeholder="'+App.lang.sign_up_country+'" pattern=".{3,75}" title="Example: Czech Republic" required>                    <input id="phone" type="text" placeholder="'+App.lang.sign_up_phone+'" pattern="\\+?(\\d{3})?\\d{9}" title="9 or +12 Digits Phone Number. Example: 777666555, +420777666555" required>                    <select id="currency">                        <option data=\'{"code":"CZK","symbol":"Kč"}\' selected>'+App.lang.sign_up_czk+'</option>                    </select>                    <input type="submit" value="'+App.lang.sign_up_sign_up+'">                    <div id="form-help">                        <div id="signin">'+App.lang.sign_up_back+'</div>                    </div>                </form>                <div class="form-footer">Powered by EnterpriseApps</div>');App.jAppContainer.html(e);var t=$("#sign-up");t.find("#signin").click(function(){App.renderSignin()}),t.submit(function(e){e.preventDefault();var t=$("#username");if(!App.isValidEmail(t.val()))return App.showWarning("<strong>"+t.val()+"</strong> is not a valid emaill address!"),!1;var i=$("#password"),a=$("#confirm");if(i.val()!==a.val())return App.showWarning("Passwords do not match!"),!1;var n={email:t.val(),password:i.val(),name:$(this).find("#name").val(),tin:$(this).find("#tin").val(),vat:$(this).find("#vat").val(),street:$(this).find("#street").val(),city:$(this).find("#city").val(),zip:$(this).find("#zip").val(),country:$(this).find("#country").val(),phone:$(this).find("#phone").val(),currency:$(this).find("#currency").find(":selected").attr("data")};App.showLoading(),$.ajax({type:"POST",url:"/signup",dataType:"json",data:n}).done(function(e){e.success?(App.renderSignin(),App.showWarning("Thank you for creating an account<br>Please check your inbox at <strong>"+e.msg+"</strong> to complete the registration")):(App.closeCurtain(),App.showWarning("Unable to create account<br><strong>"+e.msg+"</strong><br>Please let us know at <a href='mailto:info.enterpriseapps@gmail.com'>info.enterpriseapps@gmail.com</a>"))}).fail(function(e){App.closeCurtain();var t="Incorrect username and/or password";0===e.status&&(t="Network error. Please check your internet connection"),App.showWarning(t)})})},App.renderForgot=function(){var e=App.createCenterBox(!1,'<div class="form-header">'+App.lang.forgot_header+'</div>                <form id="reset-password" action="" method="POST">                    <div class="form-label">'+App.lang.forgot_label+'</div>                    <input id="username" type="text" placeholder="'+App.lang.forgot_email+'" required>                    <div class="form-instruction">'+App.lang.forgot_instruction+'</div>                    <input type="submit" value="'+App.lang.forgot_submit+'">                    <div id="form-help">                        <div id="signin">'+App.lang.forgot_back+'</div>                    </div>                </form>                <div class="form-footer">Powered by EnterpriseApps</div>');App.jAppContainer.html(e);var t=$("#reset-password");t.find("#signin").click(function(){App.renderSignin()}),t.submit(function(e){e.preventDefault();var t=$("#username");return App.isValidEmail(t.val())?(App.showLoading(),void $.ajax({type:"POST",url:"/forgot",dataType:"json",data:{email:t.val()}}).done(function(e){e.success?(App.renderSignin(),App.showWarning("A reset link has been sent to your inbox at <strong>"+e.msg+"</strong>")):(App.closeCurtain(),App.showWarning("Unable to process your request<br><strong>"+e.msg+"</strong><br>Please let us know at <a href='mailto:info.enterpriseapps@gmail.com'>info.enterpriseapps@gmail.com</a>"))}).fail(function(e){var t="Request failed. "+e.status;0===e.status&&(t="Network error. Please check your internet connection"),App.closeCurtain(),App.showWarning(t)})):(App.showWarning("<strong>"+t.val()+"</strong> is not a valid emaill address!"),!1)})},function(){var e=function(){},t=function(){App.jPrinterCopyReceipt&&(App.closeCurtain(),App.jPrinterCopyReceipt=null)};if(window.matchMedia){var i=window.matchMedia("print");i.addListener(function(i){i.matches?e():t()})}window.onbeforeprint=e,window.onafterprint=t}(),App.createControlPanel=function(){var e='<div class="cp-item" id="sale-history">'+App.lang.settings_sales_history+'</div>                    <div class="cp-item" id="off-history">'+App.lang.settings_off_history+'</div>                    <div class="cp-item" id="close-register">'+App.lang.settings_close_register+"</div>";"Admin"===App.currentEmployee.role&&(e+='<div class="cp-item" id="acc-settings">'+App.lang.settings_account+'</div>                <div class="cp-item" id="sta-settings">'+App.lang.settings_staff+'</div>                <div class="cp-item" id="pos-settings">'+App.lang.settings_pos+'</div>                <div class="cp-item" id="plu-settings">'+App.lang.settings_plu+'</div>                <div class="cp-item" id="sgs-settings">'+App.lang.settings_sg+'</div>                <div class="cp-item" id="tab-settings">'+App.lang.settings_tabs+'</div>                <div class="cp-item" id="qss-settings">'+App.lang.settings_qs+'</div>                <div class="cp-item" id="rec-settings">'+App.lang.settings_receipt+"</div>"),App.cpBody.append($(e)),App.bindControlPanel()},App.bindControlPanel=function(){App.cpBody.find(".cp-item").each(function(){var e=$(this),t=e.attr("id");switch(t){case"sale-history":e.click(App.renderSaleHistory);break;case"off-history":e.click(App.renderOffHistory);break;case"close-register":e.click(App.renderCloseRegister);break;case"acc-settings":e.click(App.renderAccountSettings);break;case"sta-settings":e.click(App.renderStaffSettings);break;case"pos-settings":e.click(App.renderPOSSettings);break;case"plu-settings":e.click(App.renderPLUSettings);break;case"sgs-settings":e.click(App.renderSaleGroupsSettings);break;case"tab-settings":e.click(App.renderTabsSettings);break;case"qss-settings":e.click(App.renderQuickSalesSettings);break;case"rec-settings":e.click(App.renderReceiptSettings)}})},App.createGoBack=function(e){return $('<div id="go-back">'+App.lang.settings_goback+"</div>").click(function(){e&&e(),App.cpBody.html(""),App.createControlPanel()})},App.renderAccountSettings=function(){var e=App.createCenterBox(!1,'<div class="form-header">'+App.lang.settings_account+'</div>                <form id="change-password" action="" method="POST">                    <div class="form-label">'+App.lang.form_label_change_password+'</div>                    <input id="old-password" type="password" pattern=".{8,128}" title="Password must be at least 8 characters long" placeholder="OLD PASSWORD">                    <input id="new-password" type="password" pattern=".{8,128}" title="Password must be at least 8 characters long" placeholder="NEW PASSWORD">                    <input id="con-password" type="password" pattern=".{8,128}" title="Password must be at least 8 characters long" placeholder="CONFIRM PASSWORD">                    <input type="submit" value="SUBMIT">                </form>');App.cpBody.html(e),App.cpBody.find(".center-box").prepend(App.createGoBack()),App.cpBody.find("#change-password").submit(function(e){e.preventDefault();var t=$(this),i=t.find("#old-password"),a=t.find("#new-password"),n=t.find("#con-password");return a.val().length<8||n.val().length<8||i.val().length<8?(App.showWarning("The minimum length for a password is 8 characters"),!1):a.val()!==n.val()?(App.showWarning("Passwords do not match"),!1):(App.showLoading(),$.ajax({type:"POST",url:"/mod/changepassword",dataType:"json",data:{oldpassword:i.val(),newpassword:a.val()}}).done(function(e){App.closeCurtain(),e.passwordChanged===!0?App.showWarning(App.lang.misc_password_changed):App.showWarning(e.msg)}).fail(function(e){App.closeCurtain();var t="The password is invalid";0===e.status&&(t="Network error. Please check your internet connection"),App.showWarning(t)}),i.val(""),a.val(""),void n.val(""))}).click(function(e){e.stopPropagation()})},App.resetRequestButtons=function(e){e.find("button").each(function(){var e=$(this);e.removeClass("fail success"),e.hasClass("mi-save")?e.find("span").text(App.lang.settings_save):e.hasClass("mi-remove")&&e.find("span").text(App.lang.settings_remove)})},App.requestModifyItem=function(e,t,i){var a="save"===t.requestType,n=a?App.lang.settings_saving:App.lang.settings_removing,p=a?App.lang.settings_saved:App.lang.settings_removed,s=App.lang.settings_failed;"import"===t.requestType&&(n="Importing",p="Imported",s="Import failed");var r=i.find(".mi-loader"),o=i.find("span");r.addClass("loading"),i.removeClass("fail success"),o.html(n),$.ajax({type:"POST",url:e,dataType:"json",data:t}).done(function(n){if(n.success){switch(r.removeClass("loading"),i.addClass("success"),o.html(p),e){case"/mod/staff":App.staff=n.msg;break;case"/mod/receipt":App.receipt=n.msg;break;case"/mod/pos":App.settings=n.msg;break;case"/mod/plu":var l=n.msg,d=App.catalog.articles,c=d.binaryIndexOf("ean",n.msg.ean);if(a)if(c>=0)l.id=d[c].id,d[c]=l;else{l.id=App.nArticles,App.nArticles++,d.push(l),d.sort(App.sortByEAN);var u=i.parents().eq(2);u.find("input[placeholder='EAN']").prop("disabled",!0),u.find(".mi-header").removeClass("new-item")}else c>=0&&d.splice(c,1);break;case"/mod/pluimport":App.catalog=n.msg,App.catalog.articles.sort(App.sortByEAN);break;case"/mod/salegroups":var v=App.buttons.saleGroups;if("new sg"===t._id)i.parents().eq(1).find("input[placeholder='_ID']").val(n.msg._id),v.push(n.msg);else for(var g=0;g<v.length;g++)if(v[g]._id===n.msg._id){a?v[g]=n.msg:v.splice(g,1);break}App.renderSaleGroupsButtons();break;case"/mod/tabs":App.buttons.tabs=n.msg,App.renderQuickSales();break;case"/mod/quicksales":App.buttons.tabs=n.msg,App.renderQuickSalesSettings(),App.renderQuickSales()}"remove"===t.requestType&&i.parents().eq(2).slideUp(App.getAnimationTime(),function(){var t=i.parents().eq(3);$(this).remove(),"/mod/tabs"===e&&t.children().each(function(e){var t=$(this);t.find("input[placeholder='NUMBER']").each(function(){$(this).val(e+1)})})})}else r.removeClass("loading"),i.addClass("fail"),o.html(s+"<br>"+App.lang.misc_reason+": "+n.msg)}).fail(function(e){r.removeClass("loading"),i.addClass("fail"),o.html(s+"<br>"+App.lang.misc_status+": "+e.status+" "+e.responseText),0===e.status&&(App.closeCurtain(),App.showWarning("Network error. Server may be down or your internet connection is lost"))})},App.generateModItemFormDOM=function(e,t){var i=[],a=[],n="",p="";switch(e){case"staff":i=["number"];break;case"receipt":n=App.lang.info_use_br;break;case"pos":break;case"plu":i=["ean"];break;case"newplu":p=" new-item";break;case"salegroups":i=["_id"],a=["_id"];break;case"tabs":i=["number","buttons"]}var s=["Admin","Seller"],r=t.number&&0===t.number.value&&t.role&&"Admin"===t.role.value,o="receipt"===e,l="pos"===e,d="salegroups"===e,c="quicksales"===e,u=["staff","salegroups","quicksales","tabs"].indexOf(e)>=0,v=t.name?t.name.value:e.toUpperCase();if(v=t.ean?t.ean.value:v,d)v=t.group?t.group.value:v;else if(c){var g=App.catalog.articles[App.catalog.articles.binaryIndexOf("ean",t.ean.value)];v=t.ean.value+(g?" - "+g.name:"")}for(var m=Object.keys(t),A='<form class="mod-item" action method="POST">                    <div class="mi-header'+p+'">'+v+'</div>                    <div class="mi-body'+(u?" hidden":"")+'">                    <div class="mi-info">'+n+"</div>",f=0;f<m.length;f++){var h=i.indexOf(m[f])>=0,b=a.indexOf(m[f])>=0,_=r&&"role"===m[f],y=0;switch(m[f]){case"pin":y=4;break;default:y=0}if(A+='<div class="mi-row'+(b?" hidden":"")+'">                            <div class="mi-row-label">'+m[f].toUpperCase()+"</div>","currency"===m[f])A+='<select id="currency">                                <option data=\'{"code":"CZK","symbol":"Kč"}\' selected>CZK - Czech Koruna</option>                            </select>';else if("role"===m[f]){A+='<select id="roles">';for(var k=0;k<s.length;k++)A+="<option"+(s[k]===t[m[f]].value?" selected":"")+(r?" disabled":"")+">"+s[k]+"</option>";A+="</select>"}else if("tax"===m[f]){A+='<select id="tax_rates">';for(var C=App.settings.tax_rates,k=0;k<C.length;k++)A+="<option"+(C[k]===t[m[f]].value?" selected":"")+">"+C[k]+"</option>";A+="</select>"}else if("tab"===m[f]){A+='<select id="tab-numbers" current-tab="'+t[m[f]].value+'">';for(var T=App.buttons.tabs,k=0;k<T.length;k++)A+='<option tab-number="'+(k+1)+'"'+(k+1===t[m[f]].value?" selected":"")+">"+(k+1)+" - "+T[k].name+"</option>";A+="</select>"}else if("bg"===m[f])A+='<input class="colpicker"                                 placeholder="'+m[f].toUpperCase()+'" value="'+t[m[f]].value+'">';else{var S="";"ean"===m[f]&&c&&(S='current-ean="'+t[m[f]].value+'"');var x=t[m[f]].valid.toString().replace(/[\/^$]/g,"");A+="<input "+S+'class=""                                    type="text"                                    pattern="'+x+'"                                    title="'+t[m[f]].title+'"                                    placeholder="'+m[f].toUpperCase()+'"                                    value="'+t[m[f]].value+'"'+(h||_?" disabled":"")+(y?' maxLength="'+y+'"':"")+(b?"":" required")+">"}A+="</div>"}return A+='<div class="mi-control">                            <button class="mi-save">                                <div class="mi-button-wrap">                                    <span>'+App.lang.settings_save+'</span>                                    <div class="mi-loader"></div>                                </div>                            </button>                            <button class="mi-remove" '+(r||o||l||p?"disabled":"")+'>                                <div class="mi-button-wrap">                                    <span>'+App.lang.settings_remove+'</span>                                    <div class="mi-loader"></div>                                </div>                            </button>                        </div>                    </div>                </form>'},App.prepareSubmit=function(e,t,i){return{dataFunction:e,button:t,requestType:i}},App.bindModSettings=function(e,t){var i=null;e.find("form.mod-item").submit(function(e){if(e.preventDefault(),i.dataFunction===App.getMiQuickSalesUpdateData&&-1===App.catalog.articles.binaryIndexOf("ean",i.button.parents().eq(1).find("input[placeholder='EAN']").val())&&"save"===i.requestType)App.showWarning("EAN not found in catalog");else{var a=i.dataFunction(i.requestType,i.button);App.requestModifyItem(t,a,i.button)}});var a=e.find(".modifier");switch(a.find(".mi-header").click(function(){var e=$(this);e.next(".mi-body").slideToggle(App.getAnimationTime())}),a.find("input").change(function(){App.resetRequestButtons($(this).parents().eq(1))}),t){case"/mod/staff":e.find(".adder").click(function(){var e=App.findMaxEmployeeNumber(a),n=$(App.generateModItemFormDOM("staff",{role:{title:"Admin or Seller",valid:/^(Admin|Seller)$/,value:"Seller"},number:{title:"1-4 digits",valid:/^\d{1,4}$/,value:e+1},name:{title:"3 or more characters",valid:/^.{3,50}$/,value:"Employee "+(e+1)},pin:{title:"4 digits",valid:/^\d{4}$/,value:"0000"}}));n.submit(function(e){e.preventDefault();var a=i.dataFunction(i.requestType,i.button);App.requestModifyItem(t,a,i.button)}),n.find("input").change(function(){App.resetRequestButtons(n)}),n.find(".mi-header").click(function(){$(this).next(".mi-body").slideToggle(App.getAnimationTime())}),n.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiEmployeeUpdateData,$(this),"save")}).click(),n.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiEmployeeUpdateData,$(this),"remove")}),n.hide().appendTo(a).slideDown(App.getAnimationTime())}),a.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiEmployeeUpdateData,$(this),"save")}),a.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiEmployeeUpdateData,$(this),"remove")});break;case"/mod/receipt":a.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiReceiptUpdateData,$(this),"save")});break;case"/mod/pos":a.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiPosUpdateData,$(this),"save")});break;case"/mod/salegroups":e.find(".adder").click(function(){var e=$(App.generateModItemFormDOM("salegroups",{tax:{title:"1-50 characters",valid:/^(0|10|15|21)$/,value:15},group:{title:"1-50 characters",valid:/^.{1,50}$/,value:"New Group"},bg:{title:"Background color",valid:/^[A-Fa-f0-9]{6}$/,value:"BB5151"},_id:{title:"24 \\w",valid:/^\w{24}$/,value:"new sg"}}));e.submit(function(e){e.preventDefault();var a=i.dataFunction(i.requestType,i.button);App.requestModifyItem(t,a,i.button)}),e.find("input").change(function(){App.resetRequestButtons(e)}),e.find(".mi-header").click(function(){$(this).next(".mi-body").slideToggle(App.getAnimationTime())}),e.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiSaleGroupUpdateData,$(this),"save")}).click(),e.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiSaleGroupUpdateData,$(this),"remove")}),e.find("input[placeholder='BG']").each(function(){var e=$(this);App.bindColpick(e)}),e.hide().appendTo(a).slideDown(App.getAnimationTime())}),a.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiSaleGroupUpdateData,$(this),"save")}),a.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiSaleGroupUpdateData,$(this),"remove")});break;case"/mod/tabs":e.find(".adder").click(function(){if(App.buttons.tabs.length>=5)App.showWarning(App.lang.misc_max_tabs);else{var e=$(App.generateModItemFormDOM("tabs",{number:{title:"Tab number",valid:/^\d{1,13}$/,value:App.buttons.tabs.length+1},name:{title:"Tab name 1-20 characters",valid:/^.{1,20}$/,value:"Tab "+(App.buttons.tabs.length+1)}}));e.submit(function(e){e.preventDefault();var a=i.dataFunction(i.requestType,i.button);App.requestModifyItem(t,a,i.button)}),e.find("input").change(function(){App.resetRequestButtons(e)}),e.find(".mi-header").click(function(){$(this).next(".mi-body").slideToggle(App.getAnimationTime())}),e.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiTabsUpdateData,$(this),"save")}).click(),e.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiTabsUpdateData,$(this),"remove")}),e.hide().appendTo(a).slideDown(App.getAnimationTime())}}),a.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiTabsUpdateData,$(this),"save")}),a.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiTabsUpdateData,$(this),"remove")});break;case"/mod/quicksales":e.find(".adder").click(function(){var e=$(App.generateModItemFormDOM("quicksales",{tab:{title:"Tab number",valid:/^[1-5]$/,value:0},ean:{title:"EAN code 1-13 digits",valid:/^\d{1,13}$/,value:"-"},bg:{title:"Background color",valid:/^[A-Fa-f0-9]{6}$/,value:"334C60"}}));e.submit(function(e){if(e.preventDefault(),i.dataFunction===App.getMiQuickSalesUpdateData&&-1===App.catalog.articles.binaryIndexOf("ean",i.button.parents().eq(1).find("input[placeholder='EAN']").val())&&"save"===i.requestType)App.showWarning("EAN not found in catalog");else{var a=i.dataFunction(i.requestType,i.button);App.requestModifyItem(t,a,i.button)}}),e.find("input").change(function(){App.resetRequestButtons(e)}),e.find(".mi-header").click(function(){$(this).next(".mi-body").slideToggle(App.getAnimationTime())}),e.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiQuickSalesUpdateData,$(this),"save")}),e.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiQuickSalesUpdateData,$(this),"remove")}),e.find("input[placeholder='BG']").each(function(){var e=$(this);App.bindColpick(e)}),e.hide().prependTo(a).slideDown(App.getAnimationTime())}),a.find("button.mi-save").click(function(){i=App.prepareSubmit(App.getMiQuickSalesUpdateData,$(this),"save")}),a.find("button.mi-remove").click(function(){i=App.prepareSubmit(App.getMiQuickSalesUpdateData,$(this),"remove")})}},App.renderStaffSettings=function(){for(var e='<div class="form-header">'+App.lang.settings_staff+'</div>                <div class="mod-form">                    <div class="form-row">                        <div class="form-label">'+App.lang.form_label_team+'</div>                        <div class="adder"></div>                    </div>                    <div class="modifier">',t=App.staff,i=0;i<t.length;i++){var a=t[i];e+=App.generateModItemFormDOM("staff",{role:{title:"Admin of Seller",valid:/^(Admin|Seller)$/,value:a.role},number:{title:"1-4 digits",valid:/^\d{1,4}$/,value:a.number},name:{title:"3 or more characters",valid:/^.{3,50}$/,value:a.name},pin:{title:"4 digits",valid:/^\d{4}$/,value:a.pin}})}e+="</div>                </div>",App.cpBody.html(App.createCenterBox(!0,e)),App.cpBody.find(".center-box").prepend(App.createGoBack());var n=App.cpBody.find(".mod-form"),p="/mod/staff";App.bindModSettings(n,p)},App.getMiEmployeeUpdateData=function(e,t){var i=t.parents().eq(1);return{requestType:e,role:i.find("select").find(":selected").val(),number:i.find("input[placeholder='NUMBER']").val(),name:i.find("input[placeholder='NAME']").val(),pin:i.find("input[placeholder='PIN']").val()}},App.findMaxEmployeeNumber=function(e){var t=0;return e.find("input[placeholder='NUMBER']").each(function(){var e=parseInt($(this).val());e>t&&(t=e)}),t},App.renderReceiptSettings=function(){var e=App.createCenterBox(!0,'<div class="form-header">'+App.lang.settings_receipt+'</div>                    <div class="mod-form">                        <div class="form-row">                            <div class="form-label">'+App.lang.form_label_receipt+'</div>                        </div>                        <div class="modifier">'+App.generateModItemFormDOM("receipt",{header:{title:"Max 256 characters",valid:/^.{0,256}$/,value:App.receipt.header},footer:{title:"Max 256 characters",valid:/^.{0,256}$/,value:App.receipt.footer}})+"</div>                    </div>");App.cpBody.html(e),App.cpBody.find(".center-box").prepend(App.createGoBack());var t=App.cpBody.find(".mod-form"),i="/mod/receipt";App.bindModSettings(t,i)},App.getMiReceiptUpdateData=function(e,t){var i=t.parents().eq(1);return{requestType:e,header:i.find("input[placeholder='HEADER']").val(),footer:i.find("input[placeholder='FOOTER']").val()}},App.renderPOSSettings=function(){var e=App.createCenterBox(!0,'<div class="form-header">'+App.lang.settings_pos+'</div>                    <div class="mod-form">                        <div class="form-row">                            <div class="form-label">'+App.lang.form_label_pos+'</div>                        </div>                        <div class="modifier">'+App.generateModItemFormDOM("pos",{name:{title:"3-100 characters",valid:/^.{3,100}$/,value:App.settings.name},tin:{title:"8 digits",valid:/^\d{8}$/,value:App.settings.tin},vat:{title:"Example: CZ1234567890",valid:/^[A-Z]{2}\d{8,10}$/,value:App.settings.vat},street:{title:"5-100 characters",valid:/^.{5,100}$/,value:App.settings.address.street},city:{title:"2-75 characters",valid:/^.{2,75}$/,value:App.settings.address.city},zip:{title:"3-10 letters",valid:/^\w{3,10}$/,value:App.settings.address.zip},country:{title:"3-75 characters",valid:/^.{3,75}$/,value:App.settings.address.country},phone:{title:"9 digits with optional prefix",valid:/^\+?(\d{3})?\d{9}$/,value:App.settings.phone},currency:{title:"",valid:/^\{"code":"(CZK)","symbol":"(Kč)"\}$/,value:App.settings.currency}})+"</div>                    </div>");App.cpBody.html(e),App.cpBody.find(".center-box").prepend(App.createGoBack());var t=App.cpBody.find(".mod-form"),i="/mod/pos";App.bindModSettings(t,i)},App.getMiPosUpdateData=function(e,t){var i=t.parents().eq(1);return{requestType:e,name:i.find("input[placeholder='NAME']").val(),tin:i.find("input[placeholder='TIN']").val(),vat:i.find("input[placeholder='VAT']").val(),street:i.find("input[placeholder='STREET']").val(),city:i.find("input[placeholder='CITY']").val(),zip:i.find("input[placeholder='ZIP']").val(),country:i.find("input[placeholder='COUNTRY']").val(),phone:i.find("input[placeholder='PHONE']").val(),currency:i.find("select").find(":selected").attr("data")}},App.checkAndTrimPluImportCSV=function(e,t,i){var a=e.split(t),n=["ean","name","price","group","tax"],p=a[0].split(i);if(p.length!==n.length)return{isValid:!1,msg:"Invalid CSV header format. Incorrect number of fields. Must be "+n.length};for(var s=0;s<p.length;s++)if(p[s]=p[s].trim(),p[s]!==n[s])return{isValid:!1,msg:"Invalid CSV header "+(s+1)+": "+p[s]+". Must be "+n[s]};for(var r=n.join(";"),o=[/^\d{1,13}$/,/^.{1,128}$/,/^\d{1,5}\.\d{2}$/,/^.{0,128}$/,/^(0|10|15|21)$/],l=[],s=1;s<a.length;s++){var d=a[s].split(i);if(o.length!==d.length)return{isValid:!1,msg:"Invalid format on line "+(s+1)+". Must have "+o.length+" values separated by semicolons (;)"};for(var c=0;c<o.length;c++){if(d[c]=d[c].trim(),!o[c].test(d[c]))return{isValid:!1,msg:"Invalid CSV on line "+(s+1)+", column: "+p[c]+", value: "+(d[c]||"/empty/")};"ean"===p[c]&&l.push({lineNumber:s+1,ean:d[c]})}r+="\n"+d.join(";")}l.sort(App.sortByEAN);for(var u=l.length-1,s=0;u>s;s++){var v=l[s],g=l[s+1];if(v.ean===g.ean)return{isValid:!1,msg:"EAN codes must be unique! Duplicate EAN codes on lines "+g.lineNumber+" and "+v.lineNumber
}}return{isValid:!0,msg:r}},App.downloadTextFile=function(e,t){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},App.renderPLUSettings=function(){var e='<div class="form-header">'+App.lang.settings_plu+'</div>                <div class="mod-form">                    <div class="form-row">                        <div class="form-label">'+App.lang.form_label_catalog+'</div>                    </div>                    <div class="form-row control">                        <button id="plu-import">                            <div class="mi-button-wrap">                                <span>Import CSV</span>                                <div class="mi-loader"></div>                            </div>                        </button>                        <input type="file" id="plu-import-input" accept=".csv"/>                        <button id="plu-export">Export CSV</button>                    </div>                    <div class="mi-info">'+App.lang.info_import+'</div>                    <div class="hline"></div>                    <div class="mi-info">'+App.lang.info_plu+'</div>                    <form class="form-row control">                        <input class="plu-searcher" placeholder="'+App.lang.ph_search_ean+'" pattern="\\d{1,13}" title="EAN must have 1-13 digits">                        <button class="plu-search">Search / Add</button>                    </form>                    <div class="modifier"></div>                </form>';App.cpBody.html(App.createCenterBox(!0,e)),App.cpBody.find(".center-box").prepend(App.createGoBack());var t=App.cpBody.find(".mod-form"),i="/mod/plu",a=t.find(".modifier"),n=null,p=t.find(".plu-searcher");t.submit(function(e){e.preventDefault();var t=p.val();if(p.val(""),t){var s=App.catalog.articles.binaryIndexOf("ean",t);if(a.empty(),s>=0){var r=App.catalog.articles[s],o=$(App.generateModItemFormDOM("plu",{ean:{title:"1-13 digits",valid:/^\d{1,13}$/,value:r.ean},name:{title:"1-128 characters",valid:/^[^"]{1,128}$/,value:r.name},price:{title:"Example: 42.00",valid:/^\d{1,4}\.\d{2}$/,value:r.price},group:{title:"Max 128 characters",valid:/^[^"]{0,128}$/,value:r.group},tax:{title:"",valid:/^(0|10|15|21)$/,value:r.tax}}));o.submit(function(e){e.preventDefault();var t=n.dataFunction(n.requestType,n.button);App.requestModifyItem(i,t,n.button)}),o.find("input").change(function(){App.resetRequestButtons(o)}),o.find(".mi-header").click(function(){$(this).next(".mi-body").slideToggle(App.getAnimationTime())}),o.find("button.mi-save").click(function(){n=App.prepareSubmit(App.getMiPluUpdateData,$(this),"save")}),o.find("button.mi-remove").click(function(){n=App.prepareSubmit(App.getMiPluUpdateData,$(this),"remove")}),o.hide().appendTo(a).slideDown(App.getAnimationTime())}else{var o=$(App.generateModItemFormDOM("newplu",{ean:{title:"1-13 digits",valid:/^\d{1,13}$/,value:t},name:{title:"1-128 characters",valid:/^.{1,128}$/,value:""},price:{title:"Example: 42.00",valid:/^\d{1,4}\.\d{2}$/,value:""},group:{title:"Max 128 characters",valid:/^.{0,128}$/,value:""},tax:{title:"",valid:/^(0|10|15|21)$/,value:App.settings.tax_rates[0]}}));o.submit(function(e){e.preventDefault();var t=n.dataFunction(n.requestType,n.button);App.requestModifyItem(i,t,n.button)}),o.find("input").change(function(){App.resetRequestButtons(o)}),o.find(".mi-header").click(function(){$(this).next(".mi-body").slideToggle(App.getAnimationTime())}),o.find("button.mi-save").click(function(){n=App.prepareSubmit(App.getMiPluUpdateData,$(this),"save")}),o.find("button.mi-remove").click(function(){n=App.prepareSubmit(App.getMiPluUpdateData,$(this),"remove")}),o.hide().appendTo(a).slideDown(App.getAnimationTime())}}});var s=t.find("#plu-import").click(function(){r.wrap("<form>").closest("form").get(0).reset(),r.unwrap(),r.click()}),r=t.find("#plu-import-input");r.change(function(e){var t=e.target.files[0],i=t.size,a=new FileReader;a.onload=function(){if(i>1e7)App.showWarning("File cannot be larger than 5 Megabytes");else{var e=App.checkAndTrimPluImportCSV(this.result,/[\n\r]+/,";");e.isValid?App.requestModifyItem("/mod/pluimport",{data:e.msg,requestType:"import"},s):(App.closeCurtain(),App.showWarning(e.msg))}},a.readAsText(t)}),t.find("#plu-export").click(function(){for(var e=App.catalog.articles,t=e.length,i="ean;name;price;group;tax",a=0;t>a;a++){var n=e[a];i+="\n"+n.ean+";"+n.name+";"+n.price+";"+n.group+";"+n.tax}App.downloadTextFile("catalog.csv",i)})},App.getMiPluUpdateData=function(e,t){var i=t.parents().eq(1);return{requestType:e,ean:i.find("input[placeholder='EAN']").val(),name:i.find("input[placeholder='NAME']").val(),price:i.find("input[placeholder='PRICE']").val(),group:i.find("input[placeholder='GROUP']").val(),tax:i.find("select").find(":selected").val()}},App.renderSaleGroupsSettings=function(){for(var e='<div class="form-header">'+App.lang.settings_sg+'</div>                <div class="mod-form">                    <div class="form-row">                        <div class="form-label">'+App.lang.form_label_sg+'</div>                        <div class="adder"></div>                    </div>                    <div class="modifier">',t=App.buttons.saleGroups,i=0;i<t.length;i++){var a=t[i];e+=App.generateModItemFormDOM("salegroups",{tax:{title:"1-50 characters",valid:/^(0|10|15|21)$/,value:a.tax},group:{title:"1-50 characters",valid:/^.{1,50}$/,value:a.group},bg:{title:"Background color",valid:/^[A-Fa-f0-9]{6}$/,value:a.bg},_id:{title:"24 \\w",valid:/^(\w{24}|new sg)$/,value:a._id}})}e+="</div>                </div>",App.cpBody.html(App.createCenterBox(!0,e)),App.cpBody.find(".center-box").prepend(App.createGoBack(function(){$(".colpick.colpick_full").remove()}));var n=App.cpBody.find(".mod-form"),p="/mod/salegroups";n.find("input[placeholder='BG']").each(function(){var e=$(this);App.bindColpick(e)}),App.bindModSettings(n,p)},App.getMiSaleGroupUpdateData=function(e,t){var i=t.parents().eq(1);return{requestType:e,tax:i.find("select").find(":selected").val(),group:i.find("input[placeholder='GROUP']").val(),bg:i.find("input[placeholder='BG']").val(),_id:i.find("input[placeholder='_ID']").val()}},App.bindColpick=function(e){e.colpick({color:e.val(),onSubmit:function(t,i,a,n,p){e.val(i.toUpperCase()).change(),$(n).colpickHide()},onChange:function(t,i,a,n,p){e.val(i.toUpperCase()).change()}})},App.renderCloseRegister=function(){for(var e=App.sales.receipts,t='<div class="form-header">'+App.lang.settings_close_register+'</div>             <div class="mod-form">                <div class="form-row">                   <div class="form-label">'+App.lang.form_label_close_register+'</div>                </div>                <div class="mi-info">'+App.lang.info_close_register+'</div>                <div class="modifier">',i={},a="",n=e.length-1;n>=0;n--){var p=e[n],s=new Date(p.date),r=App.getDatePrefix(s);a!==r&&(i[r]=[],a=r),i[r].push(p)}for(var o=Object.keys(i),n=o.length-1;n>=0;n--){for(var l=o[n],d=i[l],c=0,u={0:0,10:0,15:0,21:0},v={0:0,10:0,15:0,21:0},g=0;g<d.length;g++)for(var m=d[g],A=m.items,f=0;f<A.length;f++){var h=A[f],b=parseFloat(h.price)*h.quantity;c+=b;var _=b*h.tax_rate/100;u[h.tax_rate]+=b-_,v[h.tax_rate]+=_}var y=v[0]+v[10]+v[15]+v[21];t+='<form class="mod-item">  <div class="mi-header">'+App.getDay(d[0].date)+'</div>  <div class="mi-body hidden">    <div class="mi-row">      <div class="mi-row-label">'+App.lang.report_receipts+'</div>      <input disabled value="'+d.length+'">    </div>    <div class="mi-row">      <div class="mi-row-label">'+App.lang.report_takings+'</div>      <input disabled value="'+c.formatMoney()+'">    </div>    <div class="mi-row">      <div class="mi-row-label">'+App.lang.report_total_vat+'</div>      <input disabled value="'+y.formatMoney()+'">    </div>';for(var k=Object.keys(u),g=k.length-1;g>=0;g--){var C=k[g];t+='    <div class="mi-row">      <div class="mi-row-label">'+App.lang.report_net+" "+C+'</div>      <input disabled value="'+u[C].formatMoney()+'">    </div>    <div class="mi-row">      <div class="mi-row-label">'+App.lang.report_vat+" "+C+'</div>      <input disabled value="'+v[C].formatMoney()+'">    </div>'}t+="  </div></form>"}t+="</div>             </div>",App.cpBody.html(App.createCenterBox(!0,t)),App.cpBody.find(".center-box").prepend(App.createGoBack()),App.cpBody.find(".mi-header").click(function(){$(this).next(".mi-body").slideToggle(App.getAnimationTime())})},App.renderOffHistory=function(){var e=App.createCenterBox(!1,'<div class="form-header">'+App.lang.settings_off_history+'</div>                <div id="off-history-container">                </div>');App.cpBody.html(e),App.cpBody.find(".center-box").prepend(App.createGoBack());for(var t=App.cpBody.find("#off-history-container"),i=JSON.parse(localStorage.offlineSales),a=0;a<i.length;a++){var n=i[a];n.items=JSON.parse(n.items)}for(var p='<div class="history-receipt hr-header">                            <div class="hr-col">'+App.lang.history_number+'</div>                            <div class="hr-col">'+App.lang.history_date+'</div>                            <div class="hr-col">'+App.lang.history_employee+'</div>                            <div class="hr-col">'+App.lang.history_total+'</div>                            <div class="hr-col">'+App.lang.history_confirmed+'</div>                            <div class="hr-col">'+App.lang.history_receipt+"</div>                       </div>",a=i.length-1;a>=0;a--){for(var s=i[a],r=0,o=s.items,l=0;l<o.length;l++)r+=parseFloat(o[l].price)*o[l].quantity;p+='<div class="history-receipt hr-row">                    <div class="hr-col hr-index">'+a+'</div>                    <div class="hr-col">'+s.number+'</div>                    <div class="hr-col">'+App.getDate(s.date)+'</div>                    <div class="hr-col">'+s.clerk+'</div>                    <div class="hr-col">'+r.formatMoney()+" "+App.settings.currency.symbol+'</div>                    <div class="hr-col">'+(s.confirmed?App.lang.history_yes:App.lang.history_no)+'</div>                    <div class="hr-col hr-print" title="'+App.lang.history_print+'"></div>                </div>'}t.append(p),t.find(".hr-print").click(function(){var e=$(this),t=parseInt(e.parent().find(".hr-index").text()),a=$("<div>").addClass("pb-body"),n=$("<div>").addClass("receipt-container");n.append(App.renderReceipt(i[t],!0)),a.append(n),App.jPrinterCopyReceipt=$("<div id='payment-box'></div>").append(a),App.showInCurtain(App.jPrinterCopyReceipt),window.print()})},App.renderSaleHistory=function(){var e=App.createCenterBox(!1,'<div class="form-header">'+App.lang.settings_sales_history+'</div>                <div id="sale-history-container">                </div>');App.cpBody.html(e),App.cpBody.find(".center-box").prepend(App.createGoBack());for(var t=App.cpBody.find("#sale-history-container"),i=App.sales.receipts,a='<div class="history-receipt hr-header">                            <div class="hr-col">'+App.lang.history_number+'</div>                            <div class="hr-col">'+App.lang.history_date+'</div>                            <div class="hr-col">'+App.lang.history_employee+'</div>                            <div class="hr-col">'+App.lang.history_total+'</div>                            <div class="hr-col">'+App.lang.history_confirmed+'</div>                            <div class="hr-col">'+App.lang.history_receipt+"</div>                       </div>",n=i.length-1;n>=0;n--){for(var p=i[n],s=0,r=p.items,o=0;o<r.length;o++)s+=parseFloat(r[o].price)*r[o].quantity;a+='<div class="history-receipt hr-row">                    <div class="hr-col hr-index">'+n+'</div>                    <div class="hr-col">'+p.number+'</div>                    <div class="hr-col">'+App.getDate(p.date)+'</div>                    <div class="hr-col">'+p.clerk+'</div>                    <div class="hr-col">'+s.formatMoney()+" "+App.settings.currency.symbol+'</div>                    <div class="hr-col">'+(p.confirmed?App.lang.history_yes:App.lang.history_no)+'</div>                    <div class="hr-col hr-print" title="'+App.lang.history_print+'"></div>                </div>'}t.append(a),t.find(".hr-print").click(function(){var e=$(this),t=parseInt(e.parent().find(".hr-index").text()),a=$("<div>").addClass("pb-body"),n=$("<div>").addClass("receipt-container");n.append(App.renderReceipt(i[t],!0)),a.append(n),App.jPrinterCopyReceipt=$("<div id='payment-box'></div>").append(a),App.showInCurtain(App.jPrinterCopyReceipt),window.print()})},App.renderReceipt=function(e,t){var i=$("<div>").addClass("receipt"),a=$('<div class="receipt-header">                    <div class="preview">'+App.lang.receipt_preview+'</div>                    <div class="company-name">'+App.settings.name+'</div>                    <div class="address-1">'+App.settings.address.street+'</div>                    <div class="address-2">'+App.settings.address.zip+" "+App.settings.address.city+'</div>                    <div class="receipt-row">                        <div class="tin">'+App.lang.receipt_tin+" "+App.settings.tin+'</div>                        <div class="vat">'+App.lang.receipt_vat+" "+App.settings.vat+"</div>                    </div>                </div>");$("<div>").addClass("receipt-custom-header").html(App.receipt.header+(t?"<br><strong>"+App.lang.receipt_copy+"</strong>":"")).appendTo(a),$("<div>").attr("id","receipt-number").text(App.lang.receipt_receipt+e.number).appendTo(a),i.append(a);for(var n=$("<ul>").addClass("receipt-body"),p={},s=App.settings.tax_rates.length,r=0;s>r;r++)p[App.settings.tax_rates[r]]={tax:null,total:null};for(var o=0,l=0,d=parseFloat(e.tendered),c=e.items,r=0;r<c.length;r++){var u=c[r],v=u.quantity;o+=parseFloat(v);var g=u.price,m=u.name,A=u.tax_rate,f=parseFloat(g)*parseFloat(v),h='<li class="receipt-item"><div class="ri-n">'+m+'</div><div class="ri-v">   <div class="ri-q">'+v+'</div>   <div class="ri-x"></div>   <div class="ri-p">'+g+'</div>   <div class="ri-tt">'+f.formatMoney()+"</div></div></li>",b=$(h);n.append(b),p[A].tax+=parseFloat(f)*parseFloat(A)/100,p[A].total+=parseFloat(f),l+=f}n.appendTo(i);var _=Math.round(parseFloat(l)).formatMoney(),y=(parseFloat(_)-parseFloat(l)).formatMoney(),k=(d-l).formatMoney(),C='<div id="receipt-summary"><div id="rs-total-items">    <div class="rs-label">'+App.lang.receipt_total_items+'</div>    <div class="rs-value">'+o+'</div></div><div id="rs-subtotal">    <div class="rs-label">'+App.lang.receipt_subtotal+'</div>    <div class="rs-value">'+l.formatMoney()+"</div></div>";"0.00"!==y&&(C+='<div id="rs-round">    <div class="rs-label">'+App.lang.receipt_round+'</div>    <div class="rs-value">'+y+"</div></div>"),C+='<div id="rs-total">    <div class="rs-label">'+App.lang.receipt_total_amount+'</div>    <div class="rs-value">'+_+" "+App.settings.currency.symbol+'</div></div><div id="rs-tender">    <div class="rs-label">'+App.lang.receipt_tendered+'</div>    <div class="rs-value">'+d.formatMoney()+'</div></div><div id="rs-change">    <div class="rs-label">'+App.lang.receipt_change+'</div>    <div class="rs-value">'+k+'</div></div><div id="taxes-label">'+App.lang.receipt_vat_summary+'</div><div id="tax-header">    <div class="th-rate">'+App.lang.receipt_rate+'</div>    <div class="th-net">'+App.lang.receipt_net+'</div>    <div class="th-value">'+App.lang.receipt_tax+'</div>    <div class="th-total">'+App.lang.receipt_total+"</div></div></div>";for(var T=$(C),S=Object.keys(p),x=S.length,r=0;x>r;r++)null!==p[S[r]].tax&&$("<div>").addClass("rs-tax").append($("<div>").addClass("rs-tax-rate").text(S[r]+"%")).append($("<div>").addClass("rs-tax-net").text((p[S[r]].total.toFixed(2)-p[S[r]].tax.toFixed(2)).toFixed(2))).append($("<div>").addClass("rs-tax-tax").text(p[S[r]].tax.toFixed(2))).append($("<div>").addClass("rs-tax-total").text(p[S[r]].total.toFixed(2))).appendTo(T);return T.appendTo(i),$("<div>").addClass("receipt-clerk").text(App.lang.receipt_checked+e.clerk).appendTo(i),App.receiptTime=$("<div>").attr("id","receipt-time").text(App.getDate(e.date)).appendTo(i),$("<div>").addClass("receipt-gratitude").text(App.receipt.footer).appendTo(i),$("<div>").addClass("receipt-footer").text("EnterpriseApps").appendTo(i),i},App.renderTabsSettings=function(){for(var e=App.buttons.tabs,t='<div class="form-header">'+App.lang.settings_tabs+'</div>             <div class="mod-form">                <div class="form-row">                   <div class="form-label">'+App.lang.form_label_tabs+'</div>                   <div class="adder"></div>                </div>                <div class="mi-info">'+App.lang.info_tabs+'</div>                <div class="modifier">',i=0;i<e.length;i++){var a=e[i];t+=App.generateModItemFormDOM("tabs",{number:{title:"Tab number",valid:/^[1-5]$/,value:i+1},name:{title:"Tab name 1-20 characters",valid:/^.{1,20}$/,value:a.name},buttons:{title:"Number of active buttons in this tab",valid:/^\d{1,2}$/,value:a.quickSales.length}})}t+="</div>             </div>",App.cpBody.html(App.createCenterBox(!0,t)),App.cpBody.find(".center-box").prepend(App.createGoBack());var n=App.cpBody.find(".mod-form"),p="/mod/tabs";App.bindModSettings(n,p)},App.getMiTabsUpdateData=function(e,t){var i=t.parents().eq(1);return{requestType:e,number:i.find("input[placeholder='NUMBER']").val(),name:i.find("input[placeholder='NAME']").val()}},App.renderQuickSalesSettings=function(){for(var e=App.buttons.tabs,t='<div class="form-header">'+App.lang.settings_qs+'</div>             <div class="mod-form">                <div class="form-row">                    <div class="form-label">'+App.lang.form_label_qs+'</div>                    <div class="adder"></div>                </div>                <div class="mi-info">'+App.lang.info_qs+'</div>                <div class="modifier">',i=0;i<e.length;i++){var a=e[i],n=a.quickSales;t+='<div class="tab-header hline">Tab '+(i+1)+" - "+a.name+"</div>";for(var p=0;p<n.length;p++){var s=n[p];t+=App.generateModItemFormDOM("quicksales",{tab:{title:"Tab number",valid:/^[1-5]$/,value:i+1},ean:{title:"EAN code 1-13 digits",valid:/^\d{1,13}$/,value:s.ean},bg:{title:"Background color",valid:/^[A-Fa-f0-9]{6}$/,value:s.bg}})}}t+="</div>            </div>",App.cpBody.html(App.createCenterBox(!0,t)),App.cpBody.find(".center-box").prepend(App.createGoBack(function(){$(".colpick.colpick_full").remove()}));var r=App.cpBody.find(".mod-form"),o="/mod/quicksales";r.find("input[placeholder='BG']").each(function(){var e=$(this);App.bindColpick(e)}),App.bindModSettings(r,o),r.find("select").change(function(){$(this).parents().eq(1).find(".mi-save").click()})},App.getMiQuickSalesUpdateData=function(e,t){var i=t.parents().eq(1);return{requestType:e,currentTab:i.find("select").attr("current-tab"),destinationTab:i.find("select").find(":selected").attr("tab-number"),currentEan:i.find("input[placeholder='EAN']").attr("current-ean"),newEan:i.find("input[placeholder='EAN']").val(),bg:i.find("input[placeholder='BG']").val()}},App.Item=function(e,t,i,a,n,p,s,r){this.id=e,this.ean=t,this.name=i,this.price=a,this.group=n,this.tax=p,this.tags=s,this.desc=r},App.Item.prototype.valueOf=function(){return this.ean},$(document).ready(function(){App.init(),$.ajax({type:"POST",url:"/isAuthenticated"}).done(function(e){e.isAuthenticated?App.initDashBoard():App.renderSignin()})}),App.GLocalEN={sign_in_header:"Welcome to OPS",sign_in_label:"OPEN YOUR STORE",sign_in_username:"USERNAME",sign_in_password:"PASSWORD",sign_in_sign_in:"SIGN IN",sign_in_sign_up:"Sign up",sign_in_forgot:"Forgot your password?",sign_up_header:"Welcome to OPS",sign_up_label:"CREATE A NEW STORE",sign_up_email:"EMAIL",sign_up_password:"PASSWORD",sign_up_confirm_password:"CONFIRM PASSWORD",sign_up_name:"Name",sign_up_tin:"Taxpayer Identification Number",sign_up_vat:"Value Added Tax Number",sign_up_street:"Street and Property Number",sign_up_city:"City",sign_up_zip:"ZIP Code",sign_up_country:"Country",sign_up_phone:"Phone Number",sign_up_czk:"CZK - Czech Koruna",sign_up_sign_up:"SIGN UP",sign_up_back:"Back to sign in",forgot_header:"Welcome to OPS",forgot_label:"RESET PASSWORD",forgot_email:"EMAIL",forgot_instruction:"You'll receive a password reset link in your inbox",forgot_submit:"SUBMIT",forgot_back:"Back to sign in",dashboard_sign_out:"Sign out",dashboard_header:"Open Cash Register",dashboard_label:"EMPLOYEE LOGIN",dashboard_username:"USERNAME",reg_open_cp:"Open control panel",reg_mute:"Mute beep sound",reg_logout:"Lock",reg_cp:"Control Panel",reg_checkout:"CHECKOUT",reg_items:"item",reg_total:"Total",reg_park:"Park Sale",reg_discard:"Discard Sale",reg_si_placeholder:"Registered items will be dsplayed here",reg_pay:"Pay",reg_individual_price:"Individual Price",reg_individual_discount:"Individual Discount",reg_details:"Details",pay_payment:"Payment",pay_quick_cash:"Quick cash payment",pay_tendered:"Amount tendered",pay_change:"Change: ",pay_confirm:"CONFIRM PAYMENT",receipt_preview:"Receipt Preview",receipt_copy:"RRECEIPT COPY",receipt_tin:"TIN:",receipt_vat:"VAT:",receipt_receipt:"Receipt #",receipt_total_items:"Total items:",receipt_subtotal:"Subtotal:",receipt_round:"Round:",receipt_total_amount:"Total amount:",receipt_tendered:"Tendered:",receipt_change:"Change:",receipt_vat_summary:"VAT summary",receipt_rate:"Rate",receipt_net:"Net",receipt_tax:"Tax",receipt_total:"Total",receipt_checked:"Checked: ",pay_complete:"Sale complete!",pay_sync_failed:"Sale is not sent<br>Internet connection is lost",pay_issue_change:"Issue change of ",pay_print_receipt:"Print receipt",pay_print_receipt_without:"Print receipt without FIK",pay_email_receipt:"Email receipt",pay_done:"DONE",details_title:"Product Details",details_name:"Name: ",details_price:"Price: ",details_group:"Group: ",details_tax:"Tax: ",details_tags:"Tags: ",details_description:"Description: ",settings_goback:"Go back",settings_sales_history:"Sales history",settings_close_register:"Reports",settings_off_history:"Offline Sales",settings_account:"Account Settings",settings_staff:"Staff Settings",settings_pos:"Point of Sale Settings",settings_plu:"Edit PLU Articles",settings_sg:"Edit Sale Groups",settings_tabs:"Edit Quick Sale Tabs",settings_qs:"Edit Quick Sale Buttons",settings_receipt:"Edit Receipt",form_label_change_password:"CHANGE YOUR PASSWORD",form_label_close_register:"MAKE DAILY REPORTS",form_label_team:"MANAGE YOUR TEAM",form_label_receipt:"EDIT YOUR RECEIPT",form_label_pos:"CONFIGURE YOUR CASH REGISTER",form_label_catalog:"MANAGE YOUR CATALOG",form_label_sg:"MANAGE YOUR SALE GROUP BUTTONS",form_label_tabs:"MANAGE YOUR QUICK SALE TABS",form_label_qs:"MANAGE YOUR QUICK SALE BUTTONS",settings_save:"Save",settings_saving:"Saving",settings_saved:"Saved",settings_remove:"Remove",settings_removing:"Removing",settings_removed:"Removed",settings_failed:"Failed",history_number:"NUMBER",history_date:"DATE",history_employee:"EMPLOYEE",history_total:"TOTAL PAID",history_confirmed:"CONFIRMED",history_receipt:"PRINT",history_yes:"YES",history_no:"NO",history_print:"Print this receipt",info_close_register:"Tip: Choose a day to generate report",info_use_br:"Tip: Use '&lt;br&gt;' to add new lines",info_import:"Warning: Import will overwrite the current catalog!",info_plu:"Tip: New PLU will be highlighted green",info_tabs:"Warning: The content of the removed tab will also be removed",info_qs:"Tip: Search your catalog for the item, then reference its EAN code here",ph_search_ean:"SEARCH EAN CODE",misc_reason:"Reason: ",misc_status:"Status: ",misc_password_changed:"Password changed",misc_max_tabs:"Cannot have more than 5 tabs",misc_enter_price:"You must enter a price",report_receipts:"RECEIPTS",report_takings:"TAKINGS",report_net:"NET",report_vat:"VAT",report_total_vat:"VAT",onbeforeunload:"You are about to close this application. Any unsaved work will be lost!"},App.GLocalCS={sign_in_header:"Vítejte v OPS",sign_in_label:"OTEVŘENÍ OBCHODU",sign_in_username:"UŽIVATELSKÉ JMÉNO",sign_in_password:"HESLO",sign_in_sign_in:"PŘIHLÁSIT SE",sign_in_sign_up:"Registrace",sign_in_forgot:"Zapomenuté heslo",sign_up_header:"Vítejte v OPS",sign_up_label:"VYTVOŘENÍ NOVÉHO OBCHODU",sign_up_email:"EMAIL",sign_up_password:"HESLO",sign_up_confirm_password:"POTVRDIT HESLO",sign_up_name:"Název podniku",sign_up_tin:"IČO",sign_up_vat:"DIČ",sign_up_street:"Ulice, čp./čo.",sign_up_city:"Město",sign_up_zip:"PSČ",sign_up_country:"Stát",sign_up_phone:"Telefon",sign_up_czk:"CZK - Česká koruna",sign_up_sign_up:"VYTVOŘIT ÚČET",sign_up_back:"Zpět na přihlášení",forgot_header:"Vítejte v OPS",forgot_label:"OBNOVENÍ HESLA",forgot_email:"EMAIL",forgot_instruction:"Po stisknutí ODESLAT dostanete v mailu odkaz na obnovení hesla",forgot_submit:"ODESLAT",forgot_back:"Zpět na přihlášení",dashboard_sign_out:"Odhlásit se",dashboard_header:"Otevření pokladny",dashboard_label:"PŘIHLÁŠENÍ ZAMĚSTNANCE",dashboard_username:"UŽIVATELSKÉ JMÉNO",reg_open_cp:"Otevřít ovládací panel",reg_mute:"Ztlumit zvuky",reg_logout:"Zamknout",reg_cp:"Ovládací panel",reg_checkout:"POKLADNA",reg_items:"položek",reg_item:"položka",reg_item_plural:"položky",reg_total:"Celkem",reg_park:"Zaparkovat",reg_discard:"Zrušit prodej",reg_si_placeholder:"Zde se zobrazují namarkované položky",reg_pay:"Zaplatit",reg_individual_price:"Individuální cena",reg_individual_discount:"Individuální sleva",reg_details:"Info",pay_payment:"Platba",pay_quick_cash:"Hotovost",pay_tendered:"Přijato",pay_change:"Vráceno: ",pay_confirm:"POTVRDIT PLATBU",receipt_preview:"Náhled účtenky",receipt_copy:"Kopie účtenky",receipt_tin:"IČO:",receipt_vat:"DIČ:",receipt_receipt:"Účtenka č. ",receipt_total_items:"Celkem položek:",receipt_subtotal:"Mezisoučet:",receipt_round:"Zaokrouhlení:",receipt_total_amount:"Celkem k platbě:",receipt_tendered:"Přijato:",receipt_change:"Vráceno:",receipt_vat_summary:"Přehled DPH",receipt_rate:"Sazba",receipt_net:"Netto",receipt_tax:"DPH",receipt_total:"Celkem",receipt_checked:"Obsluha: ",pay_complete:"Transakce dokončena!",pay_sync_failed:"Tržba nebyla odeslána<br>Zřejmě spadlo spojení",pay_issue_change:"Vráceno ",pay_print_receipt:"Vytisknout účtenku",pay_print_receipt_without:"Vytisknout účtenku bez FIK",pay_email_receipt:"Odeslat mail",pay_done:"Hotovo",details_title:"Informace o položce",details_name:"Název: ",details_price:"Cena: ",details_group:"Skupina: ",details_tax:"Sazba: ",details_tags:"Tagy: ",details_description:"Popis: ",settings_goback:"Zpět",settings_sales_history:"Historie prodejů",settings_close_register:"Závěrka",settings_off_history:"Neodeslané prodeje",settings_account:"Nastavení účtu",settings_staff:"Nastavení personálu",settings_pos:"Nastavení pokladny",settings_plu:"Editace PLU",settings_sg:"Editace zbožních skupin",settings_tabs:"Editace záložek",settings_qs:"Editace rychlých tlačítek",settings_receipt:"Editace účtenky",form_label_change_password:"ZMĚNA HESLA",form_label_close_register:"VYGENEROVAT DENNÍ ZÁVĚRKY",form_label_team:"NASTAVENÍ TÝMU",form_label_receipt:"ZMĚNA ÚČTENKY",form_label_pos:"KONFIGURACE POKLADNY",form_label_catalog:"ÚPRAVA KATALOGU",form_label_sg:"ÚPRAVA ZBOŽNÍCH SKUPIN",form_label_tabs:"ÚPRAVA ZÁLOŽEK",form_label_qs:"ÚPRAVA RYCHLÝCH TLAČÍTEK",settings_save:"Uložit",settings_saving:"Ukládám",settings_saved:"Uloženo",settings_remove:"Odstranit",settings_removing:"Odstranuji",settings_removed:"Odstraněno",settings_failed:"Nepodařilo se",history_number:"ČÍSLO",history_date:"DATUM A ČAS",history_employee:"OBSLUHA",history_total:"ZAPLACENO",history_confirmed:"POTVRZENO",history_receipt:"TISK",history_yes:"ANO",history_no:"NE",history_print:"Vytisknout účtenku",info_close_register:"Tip: Vyberte den pro generování finanční zprávy",info_use_br:"Tip: Použijte '&lt;br&gt;' jako nový řádek",info_import:"Pozor: Import přepíše stávající katalog!",info_plu:"Tip: Nové PLU bude vyznačeno zeleně, existující modře",info_tabs:"Pozor: Obsah odebrané záložky bude také smazán",info_qs:"Tip: Pro vytváření vložte EAN kód zboží",ph_search_ean:"EAN kód",misc_reason:"Příčina: ",misc_status:"Status: ",misc_password_changed:"Heslo změněno",misc_max_tabs:"Nelze mít víc než 5 záložek",misc_enter_price:"Nejdřív zadejte cenu",report_receipts:"ÚČTENEK",report_takings:"TRŽBY",report_net:"NETTO",report_vat:"DPH",report_total_vat:"DPH",onbeforeunload:"Opravdu si přejete zavřít aplikaci? Všechna neuložená data budou ztracena"};